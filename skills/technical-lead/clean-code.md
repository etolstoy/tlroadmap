# Чистый код
## Описание
Этот раздел содержит набор практик, направленных на улучшение внешнего вида кода (code-style), повышение его читаемости и выразительности.

## Почему это важно?
- Облегчение и ускорение процесса code review
- Снижение порога вхождения в проект для новых сотрудников
- Вероятность допустить ошибку намного ниже, если код не запутан и предельно прост

## Что будет, если не следить за чистотой кода?
- Разработчикам будет сложнее разобраться в коде. Как следствие:
  - процесс разработки будет затягиваться
  - повышается риск выстрелить себе в ногу
-  Эффект [разбитых окон](https://ru.wikipedia.org/wiki/%D0%A2%D0%B5%D0%BE%D1%80%D0%B8%D1%8F_%D1%80%D0%B0%D0%B7%D0%B1%D0%B8%D1%82%D1%8B%D1%85_%D0%BE%D0%BA%D0%BE%D0%BD) - сегодня ты пренебрегаешь неймином, а завтра твой друг родину продаст
- В долгосрочной перспективе будет падать поддерживаемость кодовой базы. Все меньше людей будут понимать, что происходит в коде. В итоге поможет только рефакторинг

## На кого может быть делегирована?
Разработку и внедрение конвенций и правил можно поручить прокаченным синьорам. Зачастую они сами вносят такие предложения.

## Примеры поведения
### Примеры плохого поведения
- Отсутствие конкретных правил оформления приводит к разношёрстному и малопонятному коду
- Постоянные холивары на ревью про стилистические мелочи из-за отсутствия принятых гайдов и линтинга
- Написание кода, опираясь на существующие регламенты только "для галочки" 
- Неумение правильно пользоваться паттернами
- Использование всех практик подряд без полного понимания, зачем это вообще нужно. Прочел на хабре – затащи в проект

### Примеры хорошего поведения
- Подробный регламент, описывающий практики и принципы разработки для поддержания чистоты кода
  - [DRY](https://ru.wikipedia.org/wiki/Don%E2%80%99t_repeat_yourself) стоит использовать без фанатизма, чтобы не было ущерба для общей понятности кода.
  - [KISS](https://ru.wikipedia.org/wiki/KISS_(%D0%BF%D1%80%D0%B8%D0%BD%D1%86%D0%B8%D0%BF))
  - [YAGNI](https://ru.wikipedia.org/wiki/YAGNI)
- Использовать "говорящие" имена функций, классов, переменных. По возможности выносить [магические числа](https://ru.wikipedia.org/wiki/%D0%9C%D0%B0%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D1%87%D0%B8%D1%81%D0%BB%D0%BE_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)) в константы с очевидными именами
- Использовать статические анализаторы, показывающие сложные участки кода, которые стоит упростить ([Cyclomatic complexity](https://ru.wikipedia.org/wiki/%D0%A6%D0%B8%D0%BA%D0%BB%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%81%D0%BB%D0%BE%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D1%8C))
- Комментировать неочевидные куски кода, которые не удалось сделать проще (У классов желательно комментировать все методы и свойства)

## Способы прокачки
### Практика
Чтобы приучить разработчиков писать чистый код, можно начать использовать на проекте статические анализаторы / линтеры.
Для мягкого внедрения имеет смысл начать с code review. Для жёсткого внедрения можно повесить эти инструменты на git pre-commit hook. Во втором случае разработчикам будет примерно так же больно, как после первого code-review
#### Инструменты
- PHP
  - [grumphp](https://github.com/phpro/grumphp) содержит в себе огромный набор инструментов для анализа качества кода. Имеет гибкие настройки. При установке через composer автоматически привязывается на pre-commit hook и, если что-то не так, то не позволяет коммитить код.
  - [phpcs](https://github.com/squizlabs/PHP_CodeSniffer) и [php-cs-fixer](https://github.com/FriendsOfPHP/PHP-CS-Fixer) присутствуют в составе grumphp, но если нужно, можно использовать отдельно. phpcs - базовый анализатор code-style, php-cs-fixer автоматически исправляет проблемы, найденные phpcs. Есть возможность настроить специфические правила, или игнорирование оных.
  - [phpmd](https://phpmd.org/) - PHP Mess Detector. Более глубокий анализатор по сравнению с phpcs. Обнаруживает высокую сложность (cyclomatic complexity) кода, большой размер функций, слишком длинные строки, глобальные переменные и многие другие bad practices. Настраивается. Тоже присутствует в составе grumphp.
- Go (Golang)
  - [gofmt](https://golang.org/cmd/gofmt/) базовый форматтер Go из коробки. Форматирует и приводит code-style к общему виду. Всё же рекомендуется дополнительно использовать линтеры и анализаторы из следующего пункта
  - [golangci-lint](https://github.com/golangci/golangci-lint) содержит большой набор линтеров и анализаторов. По умолчанию многие проверки отключены.

## Консультации
- [Telegram-чат TL Bootcamp](https://tlinks.run/tlbootcamp).

## Материалы
### Статьи
- [10 принципов хорошего программного кода, который устроит всех](https://proglib.io/p/program-code/)
### Книги
- [Clean Code: A Handbook of Agile Software Craftsmanship (Robert C. Martin)](https://www.amazon.co.uk/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882)
